/*
Velo Payments APIs

Testing PayeesAPIService

*/

// Code generated by OpenAPI Generator (https://openapi-generator.tech);

package velopayments

import (
	"context"
	"os"
	"time"

	"testing"

	"github.com/stretchr/testify/assert"
)

func Test_velopayments_PayeesAPIService(t *testing.T) {

	payorID := os.Getenv("PAYOR")

	configuration := NewConfiguration()
	configuration.Servers = ServerConfigurations{
		{
			URL:         os.Getenv("APIURL"),
			Description: "Velo Payments for testing",
		},
	}
	apiClient := NewAPIClient(configuration)

	otoken, err := authWithVelo()
	if err != nil {
		t.Errorf("oauth token not generated")
	}
	token, err := tokenToOAuth2(otoken)
	if err != nil {
		t.Errorf("oauth2 token not generated")
	}

	t.Run("Test PayeesAPIService DeletePayeeByIdV3", func(t *testing.T) {

		t.Skip("skip test")

	})

	t.Run("Test PayeesAPIService DeletePayeeByIdV4", func(t *testing.T) {

		t.Skip("skip test")

	})

	t.Run("Test PayeesAPIService GetPayeeByIdV3", func(t *testing.T) {

		t.Skip("skip test")

	})

	t.Run("Test PayeesAPIService GetPayeeByIdV4", func(t *testing.T) {

		t.Skip("skip test")

	})

	t.Run("Test PayeesAPIService ListPayeeChangesV3", func(t *testing.T) {
		cases := map[string]struct{ ExpectedStatus int }{
			"valid": {200},
		}

		for k, tc := range cases {
			auth := context.WithValue(context.TODO(), ContextOAuth2, token)
			updatedSince, _ := time.Parse(time.RFC3339, "2013-10-20T19:20:30+01:00")
			_, h, err := apiClient.PayeesAPI.ListPayeeChangesV3(auth).PayorId(payorID).UpdatedSince(updatedSince).Page(1).PageSize(25).Execute()
			if err != nil {
				t.Errorf("TEST %s FAILED with error", k)
			}

			assert.Equal(t, tc.ExpectedStatus, h.StatusCode, "ListPayeeChangesV3: %s - returned 200", k)
		}
	})

	t.Run("Test PayeesAPIService ListPayeeChangesV4", func(t *testing.T) {

		t.Skip("skip test")

	})

	t.Run("Test PayeesAPIService ListPayeesV3", func(t *testing.T) {
		cases := map[string]struct{ ExpectedStatus int }{
			"valid": {200},
		}

		for k, tc := range cases {
			auth := context.WithValue(context.TODO(), ContextOAuth2, token)
			_, h, err := apiClient.PayeesAPI.ListPayeesV3(auth).PayorId(payorID).Page(1).PageSize(25).Execute()
			if err != nil {
				t.Errorf("TEST %s FAILED with error", k)
			}

			assert.Equal(t, tc.ExpectedStatus, h.StatusCode, "ListPayeesV3: %s - returned 200", k)
		}
	})

	t.Run("Test PayeesAPIService ListPayeesV4", func(t *testing.T) {

		t.Skip("skip test")

	})

	t.Run("Test PayeesAPIService PayeeDetailsUpdateV3", func(t *testing.T) {

		t.Skip("skip test")

	})

	t.Run("Test PayeesAPIService PayeeDetailsUpdateV4", func(t *testing.T) {

		t.Skip("skip test")

	})

	t.Run("Test PayeesAPIService V3PayeesPayeeIdRemoteIdUpdatePost", func(t *testing.T) {

		t.Skip("skip test")

	})

	t.Run("Test PayeesAPIService V4PayeesPayeeIdRemoteIdUpdatePost", func(t *testing.T) {

		t.Skip("skip test")

	})

}
